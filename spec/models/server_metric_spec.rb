# == Schema Information
#
# Table name: server_metrics
#
#  id         :integer          not null, primary key
#  date       :date
#  time       :datetime
#  cpu        :decimal(, )
#  mem        :decimal(, )
#  net_in     :decimal(, )
#  net_out    :decimal(, )
#  disk       :decimal(, )
#  server_id  :integer
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

require 'spec_helper'

describe ServerMetric do
  before :all do        
    if !@server=Server.find_by_host_name('testserver')
      @server=FactoryGirl.create :Server,:host_name=>'testserver'
    end
    
    (0..23).each do |hour|
      (0..11).each do |min|
        FactoryGirl.create :ServerMetric,:server_id=>@server.id,:date=>'2012-01-01',:time=>"2012-01-01 #{hour}:#{min*5}",:cpu=>10,:mem=>10,:disk=>100,:net_in=>200,:net_out=>300
      end
    end
    
  end
  
  after :all do
    Server.delete_all
    ServerMetric.delete_all
  end
 
  describe 'Check ServerMetric Model Validations' do
    it 'Should have a unique combination of server_id, date and time' do
      metric=@server.server_metrics.new :date=>'2012-01-01',:time=>'2012-01-01 00:00' 
      metric.should_not be_valid
    end
  end
  
  describe 'Test method :return_date_list' do
    it 'Should return a list of dates' do
      dates=ServerMetric.return_date_list(@server.id)
      dates.count.should eq(1)
      dates.each do |dt|
        dt.date.should eq(Date.parse('2012-01-01'))
      end
    end
  end
  
  describe 'Test method :return_server_data' do
    it 'Should return a list of server metric data to plot for cpu,mem,disk,net_in,net_out and average cpu' do
      metrics=ServerMetric.return_server_data(@server.id,Date.parse('01/01/2012'))
      metrics['cpu_metrics'].should eq('[[1325376000000,10.0],[1325376300000,10.0],[1325376600000,10.0],[1325376900000,10.0],[1325377200000,10.0],[1325377500000,10.0],[1325377800000,10.0],[1325378100000,10.0],[1325378400000,10.0],[1325378700000,10.0],[1325379000000,10.0],[1325379300000,10.0],[1325379600000,10.0],[1325379900000,10.0],[1325380200000,10.0],[1325380500000,10.0],[1325380800000,10.0],[1325381100000,10.0],[1325381400000,10.0],[1325381700000,10.0],[1325382000000,10.0],[1325382300000,10.0],[1325382600000,10.0],[1325382900000,10.0],[1325383200000,10.0],[1325383500000,10.0],[1325383800000,10.0],[1325384100000,10.0],[1325384400000,10.0],[1325384700000,10.0],[1325385000000,10.0],[1325385300000,10.0],[1325385600000,10.0],[1325385900000,10.0],[1325386200000,10.0],[1325386500000,10.0],[1325386800000,10.0],[1325387100000,10.0],[1325387400000,10.0],[1325387700000,10.0],[1325388000000,10.0],[1325388300000,10.0],[1325388600000,10.0],[1325388900000,10.0],[1325389200000,10.0],[1325389500000,10.0],[1325389800000,10.0],[1325390100000,10.0],[1325390400000,10.0],[1325390700000,10.0],[1325391000000,10.0],[1325391300000,10.0],[1325391600000,10.0],[1325391900000,10.0],[1325392200000,10.0],[1325392500000,10.0],[1325392800000,10.0],[1325393100000,10.0],[1325393400000,10.0],[1325393700000,10.0],[1325394000000,10.0],[1325394300000,10.0],[1325394600000,10.0],[1325394900000,10.0],[1325395200000,10.0],[1325395500000,10.0],[1325395800000,10.0],[1325396100000,10.0],[1325396400000,10.0],[1325396700000,10.0],[1325397000000,10.0],[1325397300000,10.0],[1325397600000,10.0],[1325397900000,10.0],[1325398200000,10.0],[1325398500000,10.0],[1325398800000,10.0],[1325399100000,10.0],[1325399400000,10.0],[1325399700000,10.0],[1325400000000,10.0],[1325400300000,10.0],[1325400600000,10.0],[1325400900000,10.0],[1325401200000,10.0],[1325401500000,10.0],[1325401800000,10.0],[1325402100000,10.0],[1325402400000,10.0],[1325402700000,10.0],[1325403000000,10.0],[1325403300000,10.0],[1325403600000,10.0],[1325403900000,10.0],[1325404200000,10.0],[1325404500000,10.0],[1325404800000,10.0],[1325405100000,10.0],[1325405400000,10.0],[1325405700000,10.0],[1325406000000,10.0],[1325406300000,10.0],[1325406600000,10.0],[1325406900000,10.0],[1325407200000,10.0],[1325407500000,10.0],[1325407800000,10.0],[1325408100000,10.0],[1325408400000,10.0],[1325408700000,10.0],[1325409000000,10.0],[1325409300000,10.0],[1325409600000,10.0],[1325409900000,10.0],[1325410200000,10.0],[1325410500000,10.0],[1325410800000,10.0],[1325411100000,10.0],[1325411400000,10.0],[1325411700000,10.0],[1325412000000,10.0],[1325412300000,10.0],[1325412600000,10.0],[1325412900000,10.0],[1325413200000,10.0],[1325413500000,10.0],[1325413800000,10.0],[1325414100000,10.0],[1325414400000,10.0],[1325414700000,10.0],[1325415000000,10.0],[1325415300000,10.0],[1325415600000,10.0],[1325415900000,10.0],[1325416200000,10.0],[1325416500000,10.0],[1325416800000,10.0],[1325417100000,10.0],[1325417400000,10.0],[1325417700000,10.0],[1325418000000,10.0],[1325418300000,10.0],[1325418600000,10.0],[1325418900000,10.0],[1325419200000,10.0],[1325419500000,10.0],[1325419800000,10.0],[1325420100000,10.0],[1325420400000,10.0],[1325420700000,10.0],[1325421000000,10.0],[1325421300000,10.0],[1325421600000,10.0],[1325421900000,10.0],[1325422200000,10.0],[1325422500000,10.0],[1325422800000,10.0],[1325423100000,10.0],[1325423400000,10.0],[1325423700000,10.0],[1325424000000,10.0],[1325424300000,10.0],[1325424600000,10.0],[1325424900000,10.0],[1325425200000,10.0],[1325425500000,10.0],[1325425800000,10.0],[1325426100000,10.0],[1325426400000,10.0],[1325426700000,10.0],[1325427000000,10.0],[1325427300000,10.0],[1325427600000,10.0],[1325427900000,10.0],[1325428200000,10.0],[1325428500000,10.0],[1325428800000,10.0],[1325429100000,10.0],[1325429400000,10.0],[1325429700000,10.0],[1325430000000,10.0],[1325430300000,10.0],[1325430600000,10.0],[1325430900000,10.0],[1325431200000,10.0],[1325431500000,10.0],[1325431800000,10.0],[1325432100000,10.0],[1325432400000,10.0],[1325432700000,10.0],[1325433000000,10.0],[1325433300000,10.0],[1325433600000,10.0],[1325433900000,10.0],[1325434200000,10.0],[1325434500000,10.0],[1325434800000,10.0],[1325435100000,10.0],[1325435400000,10.0],[1325435700000,10.0],[1325436000000,10.0],[1325436300000,10.0],[1325436600000,10.0],[1325436900000,10.0],[1325437200000,10.0],[1325437500000,10.0],[1325437800000,10.0],[1325438100000,10.0],[1325438400000,10.0],[1325438700000,10.0],[1325439000000,10.0],[1325439300000,10.0],[1325439600000,10.0],[1325439900000,10.0],[1325440200000,10.0],[1325440500000,10.0],[1325440800000,10.0],[1325441100000,10.0],[1325441400000,10.0],[1325441700000,10.0],[1325442000000,10.0],[1325442300000,10.0],[1325442600000,10.0],[1325442900000,10.0],[1325443200000,10.0],[1325443500000,10.0],[1325443800000,10.0],[1325444100000,10.0],[1325444400000,10.0],[1325444700000,10.0],[1325445000000,10.0],[1325445300000,10.0],[1325445600000,10.0],[1325445900000,10.0],[1325446200000,10.0],[1325446500000,10.0],[1325446800000,10.0],[1325447100000,10.0],[1325447400000,10.0],[1325447700000,10.0],[1325448000000,10.0],[1325448300000,10.0],[1325448600000,10.0],[1325448900000,10.0],[1325449200000,10.0],[1325449500000,10.0],[1325449800000,10.0],[1325450100000,10.0],[1325450400000,10.0],[1325450700000,10.0],[1325451000000,10.0],[1325451300000,10.0],[1325451600000,10.0],[1325451900000,10.0],[1325452200000,10.0],[1325452500000,10.0],[1325452800000,10.0],[1325453100000,10.0],[1325453400000,10.0],[1325453700000,10.0],[1325454000000,10.0],[1325454300000,10.0],[1325454600000,10.0],[1325454900000,10.0],[1325455200000,10.0],[1325455500000,10.0],[1325455800000,10.0],[1325456100000,10.0],[1325456400000,10.0],[1325456700000,10.0],[1325457000000,10.0],[1325457300000,10.0],[1325457600000,10.0],[1325457900000,10.0],[1325458200000,10.0],[1325458500000,10.0],[1325458800000,10.0],[1325459100000,10.0],[1325459400000,10.0],[1325459700000,10.0],[1325460000000,10.0],[1325460300000,10.0],[1325460600000,10.0],[1325460900000,10.0],[1325461200000,10.0],[1325461500000,10.0],[1325461800000,10.0],[1325462100000,10.0],];')
      metrics['mem_metrics'].should eq('[[1325376000000,10.0],[1325376300000,10.0],[1325376600000,10.0],[1325376900000,10.0],[1325377200000,10.0],[1325377500000,10.0],[1325377800000,10.0],[1325378100000,10.0],[1325378400000,10.0],[1325378700000,10.0],[1325379000000,10.0],[1325379300000,10.0],[1325379600000,10.0],[1325379900000,10.0],[1325380200000,10.0],[1325380500000,10.0],[1325380800000,10.0],[1325381100000,10.0],[1325381400000,10.0],[1325381700000,10.0],[1325382000000,10.0],[1325382300000,10.0],[1325382600000,10.0],[1325382900000,10.0],[1325383200000,10.0],[1325383500000,10.0],[1325383800000,10.0],[1325384100000,10.0],[1325384400000,10.0],[1325384700000,10.0],[1325385000000,10.0],[1325385300000,10.0],[1325385600000,10.0],[1325385900000,10.0],[1325386200000,10.0],[1325386500000,10.0],[1325386800000,10.0],[1325387100000,10.0],[1325387400000,10.0],[1325387700000,10.0],[1325388000000,10.0],[1325388300000,10.0],[1325388600000,10.0],[1325388900000,10.0],[1325389200000,10.0],[1325389500000,10.0],[1325389800000,10.0],[1325390100000,10.0],[1325390400000,10.0],[1325390700000,10.0],[1325391000000,10.0],[1325391300000,10.0],[1325391600000,10.0],[1325391900000,10.0],[1325392200000,10.0],[1325392500000,10.0],[1325392800000,10.0],[1325393100000,10.0],[1325393400000,10.0],[1325393700000,10.0],[1325394000000,10.0],[1325394300000,10.0],[1325394600000,10.0],[1325394900000,10.0],[1325395200000,10.0],[1325395500000,10.0],[1325395800000,10.0],[1325396100000,10.0],[1325396400000,10.0],[1325396700000,10.0],[1325397000000,10.0],[1325397300000,10.0],[1325397600000,10.0],[1325397900000,10.0],[1325398200000,10.0],[1325398500000,10.0],[1325398800000,10.0],[1325399100000,10.0],[1325399400000,10.0],[1325399700000,10.0],[1325400000000,10.0],[1325400300000,10.0],[1325400600000,10.0],[1325400900000,10.0],[1325401200000,10.0],[1325401500000,10.0],[1325401800000,10.0],[1325402100000,10.0],[1325402400000,10.0],[1325402700000,10.0],[1325403000000,10.0],[1325403300000,10.0],[1325403600000,10.0],[1325403900000,10.0],[1325404200000,10.0],[1325404500000,10.0],[1325404800000,10.0],[1325405100000,10.0],[1325405400000,10.0],[1325405700000,10.0],[1325406000000,10.0],[1325406300000,10.0],[1325406600000,10.0],[1325406900000,10.0],[1325407200000,10.0],[1325407500000,10.0],[1325407800000,10.0],[1325408100000,10.0],[1325408400000,10.0],[1325408700000,10.0],[1325409000000,10.0],[1325409300000,10.0],[1325409600000,10.0],[1325409900000,10.0],[1325410200000,10.0],[1325410500000,10.0],[1325410800000,10.0],[1325411100000,10.0],[1325411400000,10.0],[1325411700000,10.0],[1325412000000,10.0],[1325412300000,10.0],[1325412600000,10.0],[1325412900000,10.0],[1325413200000,10.0],[1325413500000,10.0],[1325413800000,10.0],[1325414100000,10.0],[1325414400000,10.0],[1325414700000,10.0],[1325415000000,10.0],[1325415300000,10.0],[1325415600000,10.0],[1325415900000,10.0],[1325416200000,10.0],[1325416500000,10.0],[1325416800000,10.0],[1325417100000,10.0],[1325417400000,10.0],[1325417700000,10.0],[1325418000000,10.0],[1325418300000,10.0],[1325418600000,10.0],[1325418900000,10.0],[1325419200000,10.0],[1325419500000,10.0],[1325419800000,10.0],[1325420100000,10.0],[1325420400000,10.0],[1325420700000,10.0],[1325421000000,10.0],[1325421300000,10.0],[1325421600000,10.0],[1325421900000,10.0],[1325422200000,10.0],[1325422500000,10.0],[1325422800000,10.0],[1325423100000,10.0],[1325423400000,10.0],[1325423700000,10.0],[1325424000000,10.0],[1325424300000,10.0],[1325424600000,10.0],[1325424900000,10.0],[1325425200000,10.0],[1325425500000,10.0],[1325425800000,10.0],[1325426100000,10.0],[1325426400000,10.0],[1325426700000,10.0],[1325427000000,10.0],[1325427300000,10.0],[1325427600000,10.0],[1325427900000,10.0],[1325428200000,10.0],[1325428500000,10.0],[1325428800000,10.0],[1325429100000,10.0],[1325429400000,10.0],[1325429700000,10.0],[1325430000000,10.0],[1325430300000,10.0],[1325430600000,10.0],[1325430900000,10.0],[1325431200000,10.0],[1325431500000,10.0],[1325431800000,10.0],[1325432100000,10.0],[1325432400000,10.0],[1325432700000,10.0],[1325433000000,10.0],[1325433300000,10.0],[1325433600000,10.0],[1325433900000,10.0],[1325434200000,10.0],[1325434500000,10.0],[1325434800000,10.0],[1325435100000,10.0],[1325435400000,10.0],[1325435700000,10.0],[1325436000000,10.0],[1325436300000,10.0],[1325436600000,10.0],[1325436900000,10.0],[1325437200000,10.0],[1325437500000,10.0],[1325437800000,10.0],[1325438100000,10.0],[1325438400000,10.0],[1325438700000,10.0],[1325439000000,10.0],[1325439300000,10.0],[1325439600000,10.0],[1325439900000,10.0],[1325440200000,10.0],[1325440500000,10.0],[1325440800000,10.0],[1325441100000,10.0],[1325441400000,10.0],[1325441700000,10.0],[1325442000000,10.0],[1325442300000,10.0],[1325442600000,10.0],[1325442900000,10.0],[1325443200000,10.0],[1325443500000,10.0],[1325443800000,10.0],[1325444100000,10.0],[1325444400000,10.0],[1325444700000,10.0],[1325445000000,10.0],[1325445300000,10.0],[1325445600000,10.0],[1325445900000,10.0],[1325446200000,10.0],[1325446500000,10.0],[1325446800000,10.0],[1325447100000,10.0],[1325447400000,10.0],[1325447700000,10.0],[1325448000000,10.0],[1325448300000,10.0],[1325448600000,10.0],[1325448900000,10.0],[1325449200000,10.0],[1325449500000,10.0],[1325449800000,10.0],[1325450100000,10.0],[1325450400000,10.0],[1325450700000,10.0],[1325451000000,10.0],[1325451300000,10.0],[1325451600000,10.0],[1325451900000,10.0],[1325452200000,10.0],[1325452500000,10.0],[1325452800000,10.0],[1325453100000,10.0],[1325453400000,10.0],[1325453700000,10.0],[1325454000000,10.0],[1325454300000,10.0],[1325454600000,10.0],[1325454900000,10.0],[1325455200000,10.0],[1325455500000,10.0],[1325455800000,10.0],[1325456100000,10.0],[1325456400000,10.0],[1325456700000,10.0],[1325457000000,10.0],[1325457300000,10.0],[1325457600000,10.0],[1325457900000,10.0],[1325458200000,10.0],[1325458500000,10.0],[1325458800000,10.0],[1325459100000,10.0],[1325459400000,10.0],[1325459700000,10.0],[1325460000000,10.0],[1325460300000,10.0],[1325460600000,10.0],[1325460900000,10.0],[1325461200000,10.0],[1325461500000,10.0],[1325461800000,10.0],[1325462100000,10.0],];')
      metrics['disk_metrics'].should eq('[[1325376000000,100.0],[1325376300000,100.0],[1325376600000,100.0],[1325376900000,100.0],[1325377200000,100.0],[1325377500000,100.0],[1325377800000,100.0],[1325378100000,100.0],[1325378400000,100.0],[1325378700000,100.0],[1325379000000,100.0],[1325379300000,100.0],[1325379600000,100.0],[1325379900000,100.0],[1325380200000,100.0],[1325380500000,100.0],[1325380800000,100.0],[1325381100000,100.0],[1325381400000,100.0],[1325381700000,100.0],[1325382000000,100.0],[1325382300000,100.0],[1325382600000,100.0],[1325382900000,100.0],[1325383200000,100.0],[1325383500000,100.0],[1325383800000,100.0],[1325384100000,100.0],[1325384400000,100.0],[1325384700000,100.0],[1325385000000,100.0],[1325385300000,100.0],[1325385600000,100.0],[1325385900000,100.0],[1325386200000,100.0],[1325386500000,100.0],[1325386800000,100.0],[1325387100000,100.0],[1325387400000,100.0],[1325387700000,100.0],[1325388000000,100.0],[1325388300000,100.0],[1325388600000,100.0],[1325388900000,100.0],[1325389200000,100.0],[1325389500000,100.0],[1325389800000,100.0],[1325390100000,100.0],[1325390400000,100.0],[1325390700000,100.0],[1325391000000,100.0],[1325391300000,100.0],[1325391600000,100.0],[1325391900000,100.0],[1325392200000,100.0],[1325392500000,100.0],[1325392800000,100.0],[1325393100000,100.0],[1325393400000,100.0],[1325393700000,100.0],[1325394000000,100.0],[1325394300000,100.0],[1325394600000,100.0],[1325394900000,100.0],[1325395200000,100.0],[1325395500000,100.0],[1325395800000,100.0],[1325396100000,100.0],[1325396400000,100.0],[1325396700000,100.0],[1325397000000,100.0],[1325397300000,100.0],[1325397600000,100.0],[1325397900000,100.0],[1325398200000,100.0],[1325398500000,100.0],[1325398800000,100.0],[1325399100000,100.0],[1325399400000,100.0],[1325399700000,100.0],[1325400000000,100.0],[1325400300000,100.0],[1325400600000,100.0],[1325400900000,100.0],[1325401200000,100.0],[1325401500000,100.0],[1325401800000,100.0],[1325402100000,100.0],[1325402400000,100.0],[1325402700000,100.0],[1325403000000,100.0],[1325403300000,100.0],[1325403600000,100.0],[1325403900000,100.0],[1325404200000,100.0],[1325404500000,100.0],[1325404800000,100.0],[1325405100000,100.0],[1325405400000,100.0],[1325405700000,100.0],[1325406000000,100.0],[1325406300000,100.0],[1325406600000,100.0],[1325406900000,100.0],[1325407200000,100.0],[1325407500000,100.0],[1325407800000,100.0],[1325408100000,100.0],[1325408400000,100.0],[1325408700000,100.0],[1325409000000,100.0],[1325409300000,100.0],[1325409600000,100.0],[1325409900000,100.0],[1325410200000,100.0],[1325410500000,100.0],[1325410800000,100.0],[1325411100000,100.0],[1325411400000,100.0],[1325411700000,100.0],[1325412000000,100.0],[1325412300000,100.0],[1325412600000,100.0],[1325412900000,100.0],[1325413200000,100.0],[1325413500000,100.0],[1325413800000,100.0],[1325414100000,100.0],[1325414400000,100.0],[1325414700000,100.0],[1325415000000,100.0],[1325415300000,100.0],[1325415600000,100.0],[1325415900000,100.0],[1325416200000,100.0],[1325416500000,100.0],[1325416800000,100.0],[1325417100000,100.0],[1325417400000,100.0],[1325417700000,100.0],[1325418000000,100.0],[1325418300000,100.0],[1325418600000,100.0],[1325418900000,100.0],[1325419200000,100.0],[1325419500000,100.0],[1325419800000,100.0],[1325420100000,100.0],[1325420400000,100.0],[1325420700000,100.0],[1325421000000,100.0],[1325421300000,100.0],[1325421600000,100.0],[1325421900000,100.0],[1325422200000,100.0],[1325422500000,100.0],[1325422800000,100.0],[1325423100000,100.0],[1325423400000,100.0],[1325423700000,100.0],[1325424000000,100.0],[1325424300000,100.0],[1325424600000,100.0],[1325424900000,100.0],[1325425200000,100.0],[1325425500000,100.0],[1325425800000,100.0],[1325426100000,100.0],[1325426400000,100.0],[1325426700000,100.0],[1325427000000,100.0],[1325427300000,100.0],[1325427600000,100.0],[1325427900000,100.0],[1325428200000,100.0],[1325428500000,100.0],[1325428800000,100.0],[1325429100000,100.0],[1325429400000,100.0],[1325429700000,100.0],[1325430000000,100.0],[1325430300000,100.0],[1325430600000,100.0],[1325430900000,100.0],[1325431200000,100.0],[1325431500000,100.0],[1325431800000,100.0],[1325432100000,100.0],[1325432400000,100.0],[1325432700000,100.0],[1325433000000,100.0],[1325433300000,100.0],[1325433600000,100.0],[1325433900000,100.0],[1325434200000,100.0],[1325434500000,100.0],[1325434800000,100.0],[1325435100000,100.0],[1325435400000,100.0],[1325435700000,100.0],[1325436000000,100.0],[1325436300000,100.0],[1325436600000,100.0],[1325436900000,100.0],[1325437200000,100.0],[1325437500000,100.0],[1325437800000,100.0],[1325438100000,100.0],[1325438400000,100.0],[1325438700000,100.0],[1325439000000,100.0],[1325439300000,100.0],[1325439600000,100.0],[1325439900000,100.0],[1325440200000,100.0],[1325440500000,100.0],[1325440800000,100.0],[1325441100000,100.0],[1325441400000,100.0],[1325441700000,100.0],[1325442000000,100.0],[1325442300000,100.0],[1325442600000,100.0],[1325442900000,100.0],[1325443200000,100.0],[1325443500000,100.0],[1325443800000,100.0],[1325444100000,100.0],[1325444400000,100.0],[1325444700000,100.0],[1325445000000,100.0],[1325445300000,100.0],[1325445600000,100.0],[1325445900000,100.0],[1325446200000,100.0],[1325446500000,100.0],[1325446800000,100.0],[1325447100000,100.0],[1325447400000,100.0],[1325447700000,100.0],[1325448000000,100.0],[1325448300000,100.0],[1325448600000,100.0],[1325448900000,100.0],[1325449200000,100.0],[1325449500000,100.0],[1325449800000,100.0],[1325450100000,100.0],[1325450400000,100.0],[1325450700000,100.0],[1325451000000,100.0],[1325451300000,100.0],[1325451600000,100.0],[1325451900000,100.0],[1325452200000,100.0],[1325452500000,100.0],[1325452800000,100.0],[1325453100000,100.0],[1325453400000,100.0],[1325453700000,100.0],[1325454000000,100.0],[1325454300000,100.0],[1325454600000,100.0],[1325454900000,100.0],[1325455200000,100.0],[1325455500000,100.0],[1325455800000,100.0],[1325456100000,100.0],[1325456400000,100.0],[1325456700000,100.0],[1325457000000,100.0],[1325457300000,100.0],[1325457600000,100.0],[1325457900000,100.0],[1325458200000,100.0],[1325458500000,100.0],[1325458800000,100.0],[1325459100000,100.0],[1325459400000,100.0],[1325459700000,100.0],[1325460000000,100.0],[1325460300000,100.0],[1325460600000,100.0],[1325460900000,100.0],[1325461200000,100.0],[1325461500000,100.0],[1325461800000,100.0],[1325462100000,100.0],];')
      metrics['netin_metrics'].should eq('[[1325376000000,200.0],[1325376300000,200.0],[1325376600000,200.0],[1325376900000,200.0],[1325377200000,200.0],[1325377500000,200.0],[1325377800000,200.0],[1325378100000,200.0],[1325378400000,200.0],[1325378700000,200.0],[1325379000000,200.0],[1325379300000,200.0],[1325379600000,200.0],[1325379900000,200.0],[1325380200000,200.0],[1325380500000,200.0],[1325380800000,200.0],[1325381100000,200.0],[1325381400000,200.0],[1325381700000,200.0],[1325382000000,200.0],[1325382300000,200.0],[1325382600000,200.0],[1325382900000,200.0],[1325383200000,200.0],[1325383500000,200.0],[1325383800000,200.0],[1325384100000,200.0],[1325384400000,200.0],[1325384700000,200.0],[1325385000000,200.0],[1325385300000,200.0],[1325385600000,200.0],[1325385900000,200.0],[1325386200000,200.0],[1325386500000,200.0],[1325386800000,200.0],[1325387100000,200.0],[1325387400000,200.0],[1325387700000,200.0],[1325388000000,200.0],[1325388300000,200.0],[1325388600000,200.0],[1325388900000,200.0],[1325389200000,200.0],[1325389500000,200.0],[1325389800000,200.0],[1325390100000,200.0],[1325390400000,200.0],[1325390700000,200.0],[1325391000000,200.0],[1325391300000,200.0],[1325391600000,200.0],[1325391900000,200.0],[1325392200000,200.0],[1325392500000,200.0],[1325392800000,200.0],[1325393100000,200.0],[1325393400000,200.0],[1325393700000,200.0],[1325394000000,200.0],[1325394300000,200.0],[1325394600000,200.0],[1325394900000,200.0],[1325395200000,200.0],[1325395500000,200.0],[1325395800000,200.0],[1325396100000,200.0],[1325396400000,200.0],[1325396700000,200.0],[1325397000000,200.0],[1325397300000,200.0],[1325397600000,200.0],[1325397900000,200.0],[1325398200000,200.0],[1325398500000,200.0],[1325398800000,200.0],[1325399100000,200.0],[1325399400000,200.0],[1325399700000,200.0],[1325400000000,200.0],[1325400300000,200.0],[1325400600000,200.0],[1325400900000,200.0],[1325401200000,200.0],[1325401500000,200.0],[1325401800000,200.0],[1325402100000,200.0],[1325402400000,200.0],[1325402700000,200.0],[1325403000000,200.0],[1325403300000,200.0],[1325403600000,200.0],[1325403900000,200.0],[1325404200000,200.0],[1325404500000,200.0],[1325404800000,200.0],[1325405100000,200.0],[1325405400000,200.0],[1325405700000,200.0],[1325406000000,200.0],[1325406300000,200.0],[1325406600000,200.0],[1325406900000,200.0],[1325407200000,200.0],[1325407500000,200.0],[1325407800000,200.0],[1325408100000,200.0],[1325408400000,200.0],[1325408700000,200.0],[1325409000000,200.0],[1325409300000,200.0],[1325409600000,200.0],[1325409900000,200.0],[1325410200000,200.0],[1325410500000,200.0],[1325410800000,200.0],[1325411100000,200.0],[1325411400000,200.0],[1325411700000,200.0],[1325412000000,200.0],[1325412300000,200.0],[1325412600000,200.0],[1325412900000,200.0],[1325413200000,200.0],[1325413500000,200.0],[1325413800000,200.0],[1325414100000,200.0],[1325414400000,200.0],[1325414700000,200.0],[1325415000000,200.0],[1325415300000,200.0],[1325415600000,200.0],[1325415900000,200.0],[1325416200000,200.0],[1325416500000,200.0],[1325416800000,200.0],[1325417100000,200.0],[1325417400000,200.0],[1325417700000,200.0],[1325418000000,200.0],[1325418300000,200.0],[1325418600000,200.0],[1325418900000,200.0],[1325419200000,200.0],[1325419500000,200.0],[1325419800000,200.0],[1325420100000,200.0],[1325420400000,200.0],[1325420700000,200.0],[1325421000000,200.0],[1325421300000,200.0],[1325421600000,200.0],[1325421900000,200.0],[1325422200000,200.0],[1325422500000,200.0],[1325422800000,200.0],[1325423100000,200.0],[1325423400000,200.0],[1325423700000,200.0],[1325424000000,200.0],[1325424300000,200.0],[1325424600000,200.0],[1325424900000,200.0],[1325425200000,200.0],[1325425500000,200.0],[1325425800000,200.0],[1325426100000,200.0],[1325426400000,200.0],[1325426700000,200.0],[1325427000000,200.0],[1325427300000,200.0],[1325427600000,200.0],[1325427900000,200.0],[1325428200000,200.0],[1325428500000,200.0],[1325428800000,200.0],[1325429100000,200.0],[1325429400000,200.0],[1325429700000,200.0],[1325430000000,200.0],[1325430300000,200.0],[1325430600000,200.0],[1325430900000,200.0],[1325431200000,200.0],[1325431500000,200.0],[1325431800000,200.0],[1325432100000,200.0],[1325432400000,200.0],[1325432700000,200.0],[1325433000000,200.0],[1325433300000,200.0],[1325433600000,200.0],[1325433900000,200.0],[1325434200000,200.0],[1325434500000,200.0],[1325434800000,200.0],[1325435100000,200.0],[1325435400000,200.0],[1325435700000,200.0],[1325436000000,200.0],[1325436300000,200.0],[1325436600000,200.0],[1325436900000,200.0],[1325437200000,200.0],[1325437500000,200.0],[1325437800000,200.0],[1325438100000,200.0],[1325438400000,200.0],[1325438700000,200.0],[1325439000000,200.0],[1325439300000,200.0],[1325439600000,200.0],[1325439900000,200.0],[1325440200000,200.0],[1325440500000,200.0],[1325440800000,200.0],[1325441100000,200.0],[1325441400000,200.0],[1325441700000,200.0],[1325442000000,200.0],[1325442300000,200.0],[1325442600000,200.0],[1325442900000,200.0],[1325443200000,200.0],[1325443500000,200.0],[1325443800000,200.0],[1325444100000,200.0],[1325444400000,200.0],[1325444700000,200.0],[1325445000000,200.0],[1325445300000,200.0],[1325445600000,200.0],[1325445900000,200.0],[1325446200000,200.0],[1325446500000,200.0],[1325446800000,200.0],[1325447100000,200.0],[1325447400000,200.0],[1325447700000,200.0],[1325448000000,200.0],[1325448300000,200.0],[1325448600000,200.0],[1325448900000,200.0],[1325449200000,200.0],[1325449500000,200.0],[1325449800000,200.0],[1325450100000,200.0],[1325450400000,200.0],[1325450700000,200.0],[1325451000000,200.0],[1325451300000,200.0],[1325451600000,200.0],[1325451900000,200.0],[1325452200000,200.0],[1325452500000,200.0],[1325452800000,200.0],[1325453100000,200.0],[1325453400000,200.0],[1325453700000,200.0],[1325454000000,200.0],[1325454300000,200.0],[1325454600000,200.0],[1325454900000,200.0],[1325455200000,200.0],[1325455500000,200.0],[1325455800000,200.0],[1325456100000,200.0],[1325456400000,200.0],[1325456700000,200.0],[1325457000000,200.0],[1325457300000,200.0],[1325457600000,200.0],[1325457900000,200.0],[1325458200000,200.0],[1325458500000,200.0],[1325458800000,200.0],[1325459100000,200.0],[1325459400000,200.0],[1325459700000,200.0],[1325460000000,200.0],[1325460300000,200.0],[1325460600000,200.0],[1325460900000,200.0],[1325461200000,200.0],[1325461500000,200.0],[1325461800000,200.0],[1325462100000,200.0],];')
      metrics['netout_metrics'].should eq('[[1325376000000,300.0],[1325376300000,300.0],[1325376600000,300.0],[1325376900000,300.0],[1325377200000,300.0],[1325377500000,300.0],[1325377800000,300.0],[1325378100000,300.0],[1325378400000,300.0],[1325378700000,300.0],[1325379000000,300.0],[1325379300000,300.0],[1325379600000,300.0],[1325379900000,300.0],[1325380200000,300.0],[1325380500000,300.0],[1325380800000,300.0],[1325381100000,300.0],[1325381400000,300.0],[1325381700000,300.0],[1325382000000,300.0],[1325382300000,300.0],[1325382600000,300.0],[1325382900000,300.0],[1325383200000,300.0],[1325383500000,300.0],[1325383800000,300.0],[1325384100000,300.0],[1325384400000,300.0],[1325384700000,300.0],[1325385000000,300.0],[1325385300000,300.0],[1325385600000,300.0],[1325385900000,300.0],[1325386200000,300.0],[1325386500000,300.0],[1325386800000,300.0],[1325387100000,300.0],[1325387400000,300.0],[1325387700000,300.0],[1325388000000,300.0],[1325388300000,300.0],[1325388600000,300.0],[1325388900000,300.0],[1325389200000,300.0],[1325389500000,300.0],[1325389800000,300.0],[1325390100000,300.0],[1325390400000,300.0],[1325390700000,300.0],[1325391000000,300.0],[1325391300000,300.0],[1325391600000,300.0],[1325391900000,300.0],[1325392200000,300.0],[1325392500000,300.0],[1325392800000,300.0],[1325393100000,300.0],[1325393400000,300.0],[1325393700000,300.0],[1325394000000,300.0],[1325394300000,300.0],[1325394600000,300.0],[1325394900000,300.0],[1325395200000,300.0],[1325395500000,300.0],[1325395800000,300.0],[1325396100000,300.0],[1325396400000,300.0],[1325396700000,300.0],[1325397000000,300.0],[1325397300000,300.0],[1325397600000,300.0],[1325397900000,300.0],[1325398200000,300.0],[1325398500000,300.0],[1325398800000,300.0],[1325399100000,300.0],[1325399400000,300.0],[1325399700000,300.0],[1325400000000,300.0],[1325400300000,300.0],[1325400600000,300.0],[1325400900000,300.0],[1325401200000,300.0],[1325401500000,300.0],[1325401800000,300.0],[1325402100000,300.0],[1325402400000,300.0],[1325402700000,300.0],[1325403000000,300.0],[1325403300000,300.0],[1325403600000,300.0],[1325403900000,300.0],[1325404200000,300.0],[1325404500000,300.0],[1325404800000,300.0],[1325405100000,300.0],[1325405400000,300.0],[1325405700000,300.0],[1325406000000,300.0],[1325406300000,300.0],[1325406600000,300.0],[1325406900000,300.0],[1325407200000,300.0],[1325407500000,300.0],[1325407800000,300.0],[1325408100000,300.0],[1325408400000,300.0],[1325408700000,300.0],[1325409000000,300.0],[1325409300000,300.0],[1325409600000,300.0],[1325409900000,300.0],[1325410200000,300.0],[1325410500000,300.0],[1325410800000,300.0],[1325411100000,300.0],[1325411400000,300.0],[1325411700000,300.0],[1325412000000,300.0],[1325412300000,300.0],[1325412600000,300.0],[1325412900000,300.0],[1325413200000,300.0],[1325413500000,300.0],[1325413800000,300.0],[1325414100000,300.0],[1325414400000,300.0],[1325414700000,300.0],[1325415000000,300.0],[1325415300000,300.0],[1325415600000,300.0],[1325415900000,300.0],[1325416200000,300.0],[1325416500000,300.0],[1325416800000,300.0],[1325417100000,300.0],[1325417400000,300.0],[1325417700000,300.0],[1325418000000,300.0],[1325418300000,300.0],[1325418600000,300.0],[1325418900000,300.0],[1325419200000,300.0],[1325419500000,300.0],[1325419800000,300.0],[1325420100000,300.0],[1325420400000,300.0],[1325420700000,300.0],[1325421000000,300.0],[1325421300000,300.0],[1325421600000,300.0],[1325421900000,300.0],[1325422200000,300.0],[1325422500000,300.0],[1325422800000,300.0],[1325423100000,300.0],[1325423400000,300.0],[1325423700000,300.0],[1325424000000,300.0],[1325424300000,300.0],[1325424600000,300.0],[1325424900000,300.0],[1325425200000,300.0],[1325425500000,300.0],[1325425800000,300.0],[1325426100000,300.0],[1325426400000,300.0],[1325426700000,300.0],[1325427000000,300.0],[1325427300000,300.0],[1325427600000,300.0],[1325427900000,300.0],[1325428200000,300.0],[1325428500000,300.0],[1325428800000,300.0],[1325429100000,300.0],[1325429400000,300.0],[1325429700000,300.0],[1325430000000,300.0],[1325430300000,300.0],[1325430600000,300.0],[1325430900000,300.0],[1325431200000,300.0],[1325431500000,300.0],[1325431800000,300.0],[1325432100000,300.0],[1325432400000,300.0],[1325432700000,300.0],[1325433000000,300.0],[1325433300000,300.0],[1325433600000,300.0],[1325433900000,300.0],[1325434200000,300.0],[1325434500000,300.0],[1325434800000,300.0],[1325435100000,300.0],[1325435400000,300.0],[1325435700000,300.0],[1325436000000,300.0],[1325436300000,300.0],[1325436600000,300.0],[1325436900000,300.0],[1325437200000,300.0],[1325437500000,300.0],[1325437800000,300.0],[1325438100000,300.0],[1325438400000,300.0],[1325438700000,300.0],[1325439000000,300.0],[1325439300000,300.0],[1325439600000,300.0],[1325439900000,300.0],[1325440200000,300.0],[1325440500000,300.0],[1325440800000,300.0],[1325441100000,300.0],[1325441400000,300.0],[1325441700000,300.0],[1325442000000,300.0],[1325442300000,300.0],[1325442600000,300.0],[1325442900000,300.0],[1325443200000,300.0],[1325443500000,300.0],[1325443800000,300.0],[1325444100000,300.0],[1325444400000,300.0],[1325444700000,300.0],[1325445000000,300.0],[1325445300000,300.0],[1325445600000,300.0],[1325445900000,300.0],[1325446200000,300.0],[1325446500000,300.0],[1325446800000,300.0],[1325447100000,300.0],[1325447400000,300.0],[1325447700000,300.0],[1325448000000,300.0],[1325448300000,300.0],[1325448600000,300.0],[1325448900000,300.0],[1325449200000,300.0],[1325449500000,300.0],[1325449800000,300.0],[1325450100000,300.0],[1325450400000,300.0],[1325450700000,300.0],[1325451000000,300.0],[1325451300000,300.0],[1325451600000,300.0],[1325451900000,300.0],[1325452200000,300.0],[1325452500000,300.0],[1325452800000,300.0],[1325453100000,300.0],[1325453400000,300.0],[1325453700000,300.0],[1325454000000,300.0],[1325454300000,300.0],[1325454600000,300.0],[1325454900000,300.0],[1325455200000,300.0],[1325455500000,300.0],[1325455800000,300.0],[1325456100000,300.0],[1325456400000,300.0],[1325456700000,300.0],[1325457000000,300.0],[1325457300000,300.0],[1325457600000,300.0],[1325457900000,300.0],[1325458200000,300.0],[1325458500000,300.0],[1325458800000,300.0],[1325459100000,300.0],[1325459400000,300.0],[1325459700000,300.0],[1325460000000,300.0],[1325460300000,300.0],[1325460600000,300.0],[1325460900000,300.0],[1325461200000,300.0],[1325461500000,300.0],[1325461800000,300.0],[1325462100000,300.0],];')
      metrics['cpu_av_metrics'].should eq('[[1325377800000,10],[1325381400000,10],[1325385000000,10],[1325388600000,10],[1325392200000,10],[1325395800000,10],[1325399400000,10],[1325403000000,10],[1325406600000,10],[1325410200000,10],[1325413800000,10],[1325417400000,10],[1325421000000,10],[1325424600000,10],[1325428200000,10],[1325431800000,10],[1325435400000,10],[1325439000000,10],[1325442600000,10],[1325446200000,10],[1325449800000,10],[1325453400000,10],[1325457000000,10],[1325460600000,10],];')
    end
  end

end

